<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Apple Music Lyrics Configuration</title>
    <style>
        .configSection {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        .configSection h3 {
            margin-top: 0;
            color: #00A4DC;
            font-size: 1.2em;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
        }
        .inputContainer {
            margin: 15px 0;
        }
        .fieldDescription {
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 5px;
        }
        .rangeValue {
            display: inline-block;
            min-width: 50px;
            text-align: center;
            font-weight: bold;
            color: #00A4DC;
        }
    </style>
</head>
<body>
    <div id="AppleLyricsConfigPage" data-role="page" class="page type-interior pluginConfigurationPage" data-require="emby-input,emby-button,emby-checkbox,emby-select">
        <div data-role="content">
            <div class="content-primary">
                <form id="AppleLyricsConfigForm">
                    
                    <!-- åŸºç¡€è®¾ç½® / Basic Settings -->
                    <div class="configSection">
                        <h3>ğŸµ åŸºç¡€è®¾ç½® / Basic Settings</h3>
                        
                        <div class="checkboxContainer checkboxContainer-withDescription">
                            <label class="emby-checkbox-label">
                                <input id="IsEnabled" type="checkbox" is="emby-checkbox" />
                                <span>å¯ç”¨æ’ä»¶ / Enable Plugin</span>
                            </label>
                            <div class="fieldDescription">å¯ç”¨Apple Musicé£æ ¼æ­Œè¯ / Enable Apple Music-style lyrics</div>
                        </div>
                        
                        <div class="checkboxContainer checkboxContainer-withDescription">
                            <label class="emby-checkbox-label">
                                <input id="EnableDebugMode" type="checkbox" is="emby-checkbox" />
                                <span>è°ƒè¯•æ¨¡å¼ / Debug Mode</span>
                            </label>
                            <div class="fieldDescription">åœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿— / Output detailed logs to console</div>
                        </div>
                    </div>

                    <!-- å­—ä½“è®¾ç½® / Font Settings -->
                    <div class="configSection">
                        <h3>ğŸ“ å­—ä½“è®¾ç½® / Font Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="FontSizeLandscape">
                                æ¨ªå±å­—ä½“å¤§å° / Landscape Font Size (px): <span id="FontSizeLandscapeValue" class="rangeValue">32</span>
                            </label>
                            <input id="FontSizeLandscape" type="range" is="emby-input" min="16" max="64" step="2" />
                            <div class="fieldDescription">æ¡Œé¢/æ¨ªå±è®¾å¤‡çš„é»˜è®¤å­—ä½“å¤§å° / Default font size for desktop/landscape</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="FontSizePortrait">
                                ç«–å±å­—ä½“å¤§å° / Portrait Font Size (px): <span id="FontSizePortraitValue" class="rangeValue">24</span>
                            </label>
                            <input id="FontSizePortrait" type="range" is="emby-input" min="14" max="48" step="2" />
                            <div class="fieldDescription">ç§»åŠ¨è®¾å¤‡/ç«–å±çš„å­—ä½“å¤§å° / Font size for mobile/portrait</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveFontSizeLandscape">
                                æ¨ªå±æ´»è·ƒæ­Œè¯å­—ä½“ / Landscape Active Font (px): <span id="ActiveFontSizeLandscapeValue" class="rangeValue">48</span>
                            </label>
                            <input id="ActiveFontSizeLandscape" type="range" is="emby-input" min="24" max="96" step="2" />
                            <div class="fieldDescription">æ¡Œé¢/æ¨ªå±è®¾å¤‡çš„æ´»è·ƒæ­Œè¯å­—ä½“å¤§å° / Active lyric font for desktop/landscape</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveFontSizePortrait">
                                ç«–å±æ´»è·ƒæ­Œè¯å­—ä½“ / Portrait Active Font (px): <span id="ActiveFontSizePortraitValue" class="rangeValue">36</span>
                            </label>
                            <input id="ActiveFontSizePortrait" type="range" is="emby-input" min="18" max="72" step="2" />
                            <div class="fieldDescription">ç§»åŠ¨è®¾å¤‡/ç«–å±çš„æ´»è·ƒæ­Œè¯å­—ä½“å¤§å° / Active lyric font for mobile/portrait</div>
                        </div>
                    </div>

                    <!-- èƒŒæ™¯è®¾ç½® / Background Settings -->
                    <div class="configSection">
                        <h3>ğŸ–¼ï¸ èƒŒæ™¯è®¾ç½® / Background Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="BackgroundBlur">
                                èƒŒæ™¯æ¨¡ç³Šç¨‹åº¦ / Background Blur (px): <span id="BackgroundBlurValue" class="rangeValue">60</span>
                            </label>
                            <input id="BackgroundBlur" type="range" is="emby-input" min="0" max="100" step="5" />
                            <div class="fieldDescription">ä¸“è¾‘å°é¢èƒŒæ™¯çš„æ¨¡ç³Šç¨‹åº¦ / Blur amount for album art background</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="BackgroundBrightness">
                                èƒŒæ™¯äº®åº¦ / Background Brightness: <span id="BackgroundBrightnessValue" class="rangeValue">0.8</span>
                            </label>
                            <input id="BackgroundBrightness" type="range" is="emby-input" min="0" max="2" step="0.05" />
                            <div class="fieldDescription">èƒŒæ™¯æ•´ä½“äº®åº¦ (0.0=å…¨é»‘, 1.0=åŸå§‹, 2.0=åŠ å€) / Background brightness (0.0=black, 1.0=original, 2.0=doubled)</div>
                        </div>
                    </div>

                    <!-- éæ´»è·ƒæ­Œè¯è®¾ç½® / Inactive Lyric Settings -->
                    <div class="configSection">
                        <h3>ğŸ’¤ éæ´»è·ƒæ­Œè¯è®¾ç½® / Inactive Lyric Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="InactiveBrightness">
                                äº®åº¦ / Brightness: <span id="InactiveBrightnessValue" class="rangeValue">0.85</span>
                            </label>
                            <input id="InactiveBrightness" type="range" is="emby-input" min="0" max="2" step="0.05" />
                            <div class="fieldDescription">éæ´»è·ƒæ­Œè¯çš„äº®åº¦ / Brightness of inactive lyrics</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="InactiveOpacity">
                                é€æ˜åº¦ / Opacity: <span id="InactiveOpacityValue" class="rangeValue">0.65</span>
                            </label>
                            <input id="InactiveOpacity" type="range" is="emby-input" min="0" max="1" step="0.05" />
                            <div class="fieldDescription">éæ´»è·ƒæ­Œè¯çš„é€æ˜åº¦ (0.0=å®Œå…¨é€æ˜, 1.0=å®Œå…¨ä¸é€æ˜) / Opacity (0.0=transparent, 1.0=opaque)</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="InactiveShadowIntensity">
                                é˜´å½±å¼ºåº¦ / Shadow Intensity: <span id="InactiveShadowIntensityValue" class="rangeValue">0.5</span>
                            </label>
                            <input id="InactiveShadowIntensity" type="range" is="emby-input" min="0" max="1" step="0.05" />
                            <div class="fieldDescription">éæ´»è·ƒæ­Œè¯çš„é˜´å½±å¼ºåº¦ / Shadow intensity of inactive lyrics</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="InactiveBlur">
                                æ¨¡ç³Šç¨‹åº¦ / Blur Amount (px): <span id="InactiveBlurValue" class="rangeValue">0.5</span>
                            </label>
                            <input id="InactiveBlur" type="range" is="emby-input" min="0" max="10" step="0.1" />
                            <div class="fieldDescription">éæ´»è·ƒæ­Œè¯çš„æ¨¡ç³Šç¨‹åº¦ / Blur amount for inactive lyrics</div>
                        </div>
                    </div>

                    <!-- æ´»è·ƒæ­Œè¯è®¾ç½® / Active Lyric Settings -->
                    <div class="configSection">
                        <h3>â­ æ´»è·ƒæ­Œè¯è®¾ç½® / Active Lyric Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveBrightness">
                                äº®åº¦ / Brightness: <span id="ActiveBrightnessValue" class="rangeValue">1.15</span>
                            </label>
                            <input id="ActiveBrightness" type="range" is="emby-input" min="0" max="2" step="0.05" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯çš„äº®åº¦ / Brightness of active lyric</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveOpacity">
                                é€æ˜åº¦ / Opacity: <span id="ActiveOpacityValue" class="rangeValue">1.0</span>
                            </label>
                            <input id="ActiveOpacity" type="range" is="emby-input" min="0" max="1" step="0.05" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯çš„é€æ˜åº¦ / Opacity of active lyric</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveGlowIntensity">
                                å‘å…‰å¼ºåº¦ / Glow Intensity: <span id="ActiveGlowIntensityValue" class="rangeValue">0.2</span>
                            </label>
                            <input id="ActiveGlowIntensity" type="range" is="emby-input" min="0" max="1" step="0.05" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯çš„å‘å…‰æ•ˆæœå¼ºåº¦ / Glow effect intensity for active lyric</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveShadowIntensity">
                                é˜´å½±å¼ºåº¦ / Shadow Intensity: <span id="ActiveShadowIntensityValue" class="rangeValue">0.15</span>
                            </label>
                            <input id="ActiveShadowIntensity" type="range" is="emby-input" min="0" max="1" step="0.05" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯çš„é˜´å½±å¼ºåº¦ / Shadow intensity of active lyric</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ActiveBlur">
                                æ¨¡ç³Šç¨‹åº¦ / Blur Amount (px): <span id="ActiveBlurValue" class="rangeValue">0.0</span>
                            </label>
                            <input id="ActiveBlur" type="range" is="emby-input" min="0" max="10" step="0.1" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯çš„æ¨¡ç³Šç¨‹åº¦(é€šå¸¸ä¸º0) / Blur amount for active lyric (usually 0)</div>
                        </div>
                    </div>

                    <!-- æ¸å˜æ¨¡ç³Šè®¾ç½® / Gradient Blur Settings -->
                    <div class="configSection">
                        <h3>ğŸŒˆ æ¸å˜æ¨¡ç³Šè®¾ç½® / Gradient Blur Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="GradientBlurAmount">
                                æ¸å˜æ¨¡ç³Šå¼ºåº¦ / Gradient Blur Amount: <span id="GradientBlurAmountValue" class="rangeValue">1.0</span>
                            </label>
                            <input id="GradientBlurAmount" type="range" is="emby-input" min="0" max="10" step="0.1" />
                            <div class="fieldDescription">æ´»è·ƒæ­Œè¯å‰åçš„æ¸å˜æ¨¡ç³Šå¼ºåº¦ / Gradient blur intensity around active lyric</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="GradientBlurRange">
                                æ¸å˜å½±å“èŒƒå›´ / Gradient Range (lines): <span id="GradientBlurRangeValue" class="rangeValue">3</span>
                            </label>
                            <input id="GradientBlurRange" type="range" is="emby-input" min="1" max="10" step="1" />
                            <div class="fieldDescription">æ¸å˜æ¨¡ç³Šå½±å“çš„æ­Œè¯è¡Œæ•° / Number of lyrics lines affected by gradient blur</div>
                        </div>
                    </div>

                    <!-- åŠ¨ç”»è®¾ç½® / Animation Settings -->
                    <div class="configSection">
                        <h3>ğŸ¬ åŠ¨ç”»è®¾ç½® / Animation Settings</h3>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="ScrollDuration">
                                æ»šåŠ¨æ—¶é•¿ / Scroll Duration (ms): <span id="ScrollDurationValue" class="rangeValue">1000</span>
                            </label>
                            <input id="ScrollDuration" type="range" is="emby-input" min="300" max="2000" step="100" />
                            <div class="fieldDescription">åˆ‡æ¢æ­Œè¯æ—¶çš„æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ / Scroll animation duration when switching lyrics</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="SpringSpeed">
                                å¼¹ç°§é€Ÿåº¦ / Spring Speed: <span id="SpringSpeedValue" class="rangeValue">1.0</span>
                            </label>
                            <input id="SpringSpeed" type="range" is="emby-input" min="0.1" max="5" step="0.1" />
                            <div class="fieldDescription">å¼¹ç°§åŠ¨ç”»çš„é€Ÿåº¦ç³»æ•° (1.0=æ ‡å‡†, >1.0=æ›´å¿«, <1.0=æ›´æ…¢) / Spring animation speed (1.0=standard, >1.0=faster, <1.0=slower)</div>
                        </div>
                        
                        <div class="inputContainer">
                            <label class="inputLabel" for="TransformDuration">
                                å˜æ¢æ—¶é•¿ / Transform Duration (ms): <span id="TransformDurationValue" class="rangeValue">800</span>
                            </label>
                            <input id="TransformDuration" type="range" is="emby-input" min="200" max="2000" step="100" />
                            <div class="fieldDescription">æ­Œè¯ç¼©æ”¾/é€æ˜åº¦å˜æ¢çš„æ—¶é•¿ / Duration for lyric transform/opacity transitions</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; display: flex; gap: 15px;">
                        <button is="emby-button" type="submit" class="raised button-submit emby-button" style="flex: 1;">
                            <span>ğŸ’¾ ä¿å­˜è®¾ç½® / Save Settings</span>
                        </button>
                        <button is="emby-button" type="button" id="resetDefaults" class="raised emby-button" style="flex: 1; background-color: #e74c3c;">
                            <span>ğŸ”„ æ¢å¤é»˜è®¤ / Reset Defaults</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <script type="text/javascript">
            var AppleLyricsConfig = {
                pluginUniqueId: '56AF82E5-609E-455D-A135-4B30A73333E5'
            };

            // è¾…åŠ©å‡½æ•°ï¼šæ›´æ–°æ»‘å—æ˜¾ç¤ºå€¼
            function updateRangeValue(inputId, valueId, value) {
                var valueElement = document.getElementById(valueId);
                if (valueElement) {
                    valueElement.textContent = value;
                }
            }

            // ç»‘å®šæ‰€æœ‰æ»‘å—çš„å®æ—¶æ˜¾ç¤º
            function bindRangeInputs() {
                var rangeInputs = [
                    'FontSizeLandscape', 'FontSizePortrait', 'ActiveFontSizeLandscape', 'ActiveFontSizePortrait',
                    'BackgroundBlur', 'BackgroundBrightness',
                    'InactiveBrightness', 'InactiveOpacity', 'InactiveShadowIntensity', 'InactiveBlur',
                    'ActiveBrightness', 'ActiveOpacity', 'ActiveGlowIntensity', 'ActiveShadowIntensity', 'ActiveBlur',
                    'GradientBlurAmount', 'GradientBlurRange',
                    'ScrollDuration', 'SpringSpeed', 'TransformDuration'
                ];

                rangeInputs.forEach(function(id) {
                    var input = document.getElementById(id);
                    if (input) {
                        input.addEventListener('input', function() {
                            updateRangeValue(id, id + 'Value', this.value);
                        });
                    }
                });
            }

            document.querySelector('#AppleLyricsConfigPage')
                .addEventListener('pageshow', function() {
                    Dashboard.showLoadingMsg();
                    ApiClient.getPluginConfiguration(AppleLyricsConfig.pluginUniqueId).then(function (config) {
                        // åŸºç¡€è®¾ç½®
                        document.querySelector('#IsEnabled').checked = config.IsEnabled !== false;
                        document.querySelector('#EnableDebugMode').checked = config.EnableDebugMode || false;

                        // å­—ä½“è®¾ç½®
                        var fontLandscape = config.FontSizeLandscape || 32;
                        var fontPortrait = config.FontSizePortrait || 24;
                        var activeFontLandscape = config.ActiveFontSizeLandscape || 48;
                        var activeFontPortrait = config.ActiveFontSizePortrait || 36;
                        document.querySelector('#FontSizeLandscape').value = fontLandscape;
                        document.querySelector('#FontSizePortrait').value = fontPortrait;
                        document.querySelector('#ActiveFontSizeLandscape').value = activeFontLandscape;
                        document.querySelector('#ActiveFontSizePortrait').value = activeFontPortrait;
                        updateRangeValue('FontSizeLandscape', 'FontSizeLandscapeValue', fontLandscape);
                        updateRangeValue('FontSizePortrait', 'FontSizePortraitValue', fontPortrait);
                        updateRangeValue('ActiveFontSizeLandscape', 'ActiveFontSizeLandscapeValue', activeFontLandscape);
                        updateRangeValue('ActiveFontSizePortrait', 'ActiveFontSizePortraitValue', activeFontPortrait);

                        // èƒŒæ™¯è®¾ç½®
                        var bgBlur = config.BackgroundBlur !== undefined ? config.BackgroundBlur : 60;
                        var bgBrightness = config.BackgroundBrightness !== undefined ? config.BackgroundBrightness : 0.8;
                        document.querySelector('#BackgroundBlur').value = bgBlur;
                        document.querySelector('#BackgroundBrightness').value = bgBrightness;
                        updateRangeValue('BackgroundBlur', 'BackgroundBlurValue', bgBlur);
                        updateRangeValue('BackgroundBrightness', 'BackgroundBrightnessValue', bgBrightness);

                        // éæ´»è·ƒæ­Œè¯è®¾ç½®
                        var inactiveBrightness = config.InactiveBrightness !== undefined ? config.InactiveBrightness : 0.85;
                        var inactiveOpacity = config.InactiveOpacity !== undefined ? config.InactiveOpacity : 0.65;
                        var inactiveShadow = config.InactiveShadowIntensity !== undefined ? config.InactiveShadowIntensity : 0.5;
                        var inactiveBlur = config.InactiveBlur !== undefined ? config.InactiveBlur : 0.5;
                        document.querySelector('#InactiveBrightness').value = inactiveBrightness;
                        document.querySelector('#InactiveOpacity').value = inactiveOpacity;
                        document.querySelector('#InactiveShadowIntensity').value = inactiveShadow;
                        document.querySelector('#InactiveBlur').value = inactiveBlur;
                        updateRangeValue('InactiveBrightness', 'InactiveBrightnessValue', inactiveBrightness);
                        updateRangeValue('InactiveOpacity', 'InactiveOpacityValue', inactiveOpacity);
                        updateRangeValue('InactiveShadowIntensity', 'InactiveShadowIntensityValue', inactiveShadow);
                        updateRangeValue('InactiveBlur', 'InactiveBlurValue', inactiveBlur);

                        // æ´»è·ƒæ­Œè¯è®¾ç½®
                        var activeBrightness = config.ActiveBrightness !== undefined ? config.ActiveBrightness : 1.15;
                        var activeOpacity = config.ActiveOpacity !== undefined ? config.ActiveOpacity : 1.0;
                        var activeGlow = config.ActiveGlowIntensity !== undefined ? config.ActiveGlowIntensity : 0.2;
                        var activeShadow = config.ActiveShadowIntensity !== undefined ? config.ActiveShadowIntensity : 0.15;
                        var activeBlur = config.ActiveBlur !== undefined ? config.ActiveBlur : 0.0;
                        document.querySelector('#ActiveBrightness').value = activeBrightness;
                        document.querySelector('#ActiveOpacity').value = activeOpacity;
                        document.querySelector('#ActiveGlowIntensity').value = activeGlow;
                        document.querySelector('#ActiveShadowIntensity').value = activeShadow;
                        document.querySelector('#ActiveBlur').value = activeBlur;
                        updateRangeValue('ActiveBrightness', 'ActiveBrightnessValue', activeBrightness);
                        updateRangeValue('ActiveOpacity', 'ActiveOpacityValue', activeOpacity);
                        updateRangeValue('ActiveGlowIntensity', 'ActiveGlowIntensityValue', activeGlow);
                        updateRangeValue('ActiveShadowIntensity', 'ActiveShadowIntensityValue', activeShadow);
                        updateRangeValue('ActiveBlur', 'ActiveBlurValue', activeBlur);

                        // æ¸å˜æ¨¡ç³Šè®¾ç½®
                        var gradientBlur = config.GradientBlurAmount !== undefined ? config.GradientBlurAmount : 1.0;
                        var gradientRange = config.GradientBlurRange !== undefined ? config.GradientBlurRange : 3;
                        document.querySelector('#GradientBlurAmount').value = gradientBlur;
                        document.querySelector('#GradientBlurRange').value = gradientRange;
                        updateRangeValue('GradientBlurAmount', 'GradientBlurAmountValue', gradientBlur);
                        updateRangeValue('GradientBlurRange', 'GradientBlurRangeValue', gradientRange);

                        // åŠ¨ç”»è®¾ç½®
                        var scrollDuration = config.ScrollDuration !== undefined ? config.ScrollDuration : 1000;
                        var springSpeed = config.SpringSpeed !== undefined ? config.SpringSpeed : 1.0;
                        var transformDuration = config.TransformDuration !== undefined ? config.TransformDuration : 800;
                        document.querySelector('#ScrollDuration').value = scrollDuration;
                        document.querySelector('#SpringSpeed').value = springSpeed;
                        document.querySelector('#TransformDuration').value = transformDuration;
                        updateRangeValue('ScrollDuration', 'ScrollDurationValue', scrollDuration);
                        updateRangeValue('SpringSpeed', 'SpringSpeedValue', springSpeed);
                        updateRangeValue('TransformDuration', 'TransformDurationValue', transformDuration);

                        // ç»‘å®šæ»‘å—äº‹ä»¶
                        bindRangeInputs();

                        Dashboard.hideLoadingMsg();
                    });
                });

            document.querySelector('#AppleLyricsConfigForm')
                .addEventListener('submit', function(e) {
                    e.preventDefault();
                    Dashboard.showLoadingMsg();
                    
                    ApiClient.getPluginConfiguration(AppleLyricsConfig.pluginUniqueId).then(function (config) {
                        // åŸºç¡€è®¾ç½®
                        config.IsEnabled = document.querySelector('#IsEnabled').checked;
                        config.EnableDebugMode = document.querySelector('#EnableDebugMode').checked;

                        // å­—ä½“è®¾ç½®
                        config.FontSizeLandscape = parseInt(document.querySelector('#FontSizeLandscape').value, 10);
                        config.FontSizePortrait = parseInt(document.querySelector('#FontSizePortrait').value, 10);
                        config.ActiveFontSizeLandscape = parseInt(document.querySelector('#ActiveFontSizeLandscape').value, 10);
                        config.ActiveFontSizePortrait = parseInt(document.querySelector('#ActiveFontSizePortrait').value, 10);

                        // èƒŒæ™¯è®¾ç½®
                        config.BackgroundBlur = parseInt(document.querySelector('#BackgroundBlur').value, 10);
                        config.BackgroundBrightness = parseFloat(document.querySelector('#BackgroundBrightness').value);

                        // éæ´»è·ƒæ­Œè¯è®¾ç½®
                        config.InactiveBrightness = parseFloat(document.querySelector('#InactiveBrightness').value);
                        config.InactiveOpacity = parseFloat(document.querySelector('#InactiveOpacity').value);
                        config.InactiveShadowIntensity = parseFloat(document.querySelector('#InactiveShadowIntensity').value);
                        config.InactiveBlur = parseFloat(document.querySelector('#InactiveBlur').value);

                        // æ´»è·ƒæ­Œè¯è®¾ç½®
                        config.ActiveBrightness = parseFloat(document.querySelector('#ActiveBrightness').value);
                        config.ActiveOpacity = parseFloat(document.querySelector('#ActiveOpacity').value);
                        config.ActiveGlowIntensity = parseFloat(document.querySelector('#ActiveGlowIntensity').value);
                        config.ActiveShadowIntensity = parseFloat(document.querySelector('#ActiveShadowIntensity').value);
                        config.ActiveBlur = parseFloat(document.querySelector('#ActiveBlur').value);

                        // æ¸å˜æ¨¡ç³Šè®¾ç½®
                        config.GradientBlurAmount = parseFloat(document.querySelector('#GradientBlurAmount').value);
                        config.GradientBlurRange = parseInt(document.querySelector('#GradientBlurRange').value, 10);

                        // åŠ¨ç”»è®¾ç½®
                        config.ScrollDuration = parseInt(document.querySelector('#ScrollDuration').value, 10);
                        config.SpringSpeed = parseFloat(document.querySelector('#SpringSpeed').value);
                        config.TransformDuration = parseInt(document.querySelector('#TransformDuration').value, 10);
                        
                        ApiClient.updatePluginConfiguration(AppleLyricsConfig.pluginUniqueId, config).then(function (result) {
                            Dashboard.processPluginConfigurationUpdateResult(result);
                        });
                    });

                    return false;
                });

            // æ¢å¤é»˜è®¤é…ç½®
            document.querySelector('#resetDefaults')
                .addEventListener('click', function() {
                    if (!confirm('ç¡®å®šè¦æ¢å¤æ‰€æœ‰è®¾ç½®åˆ°é»˜è®¤å€¼å—ï¼Ÿ\nAre you sure you want to reset all settings to defaults?')) {
                        return;
                    }

                    Dashboard.showLoadingMsg();
                    
                    ApiClient.getPluginConfiguration(AppleLyricsConfig.pluginUniqueId).then(function (config) {
                        // åŸºç¡€è®¾ç½®
                        config.IsEnabled = true;
                        config.EnableDebugMode = false;

                        // å­—ä½“è®¾ç½®
                        config.FontSizeLandscape = 32;
                        config.FontSizePortrait = 24;
                        config.ActiveFontSizeLandscape = 48;
                        config.ActiveFontSizePortrait = 36;

                        // èƒŒæ™¯è®¾ç½®
                        config.BackgroundBlur = 60;
                        config.BackgroundBrightness = 0.8;

                        // éæ´»è·ƒæ­Œè¯è®¾ç½®
                        config.InactiveBrightness = 0.85;
                        config.InactiveOpacity = 0.65;
                        config.InactiveShadowIntensity = 0.5;
                        config.InactiveBlur = 0.5;

                        // æ´»è·ƒæ­Œè¯è®¾ç½®
                        config.ActiveBrightness = 1.15;
                        config.ActiveOpacity = 1.0;
                        config.ActiveGlowIntensity = 0.2;
                        config.ActiveShadowIntensity = 0.15;
                        config.ActiveBlur = 0.0;

                        // æ¸å˜æ¨¡ç³Šè®¾ç½®
                        config.GradientBlurAmount = 1.0;
                        config.GradientBlurRange = 3;

                        // åŠ¨ç”»è®¾ç½®
                        config.ScrollDuration = 1000;
                        config.SpringSpeed = 1.0;
                        config.TransformDuration = 800;
                        
                        ApiClient.updatePluginConfiguration(AppleLyricsConfig.pluginUniqueId, config).then(function (result) {
                            Dashboard.processPluginConfigurationUpdateResult(result);
                            // é‡æ–°åŠ è½½é¡µé¢ä»¥åˆ·æ–°æ˜¾ç¤º
                            window.location.reload();
                        });
                    });
                });
        </script>
    </div>
</body>
</html>